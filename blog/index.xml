<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>博客文章 on My Hugo Site</title><link>https://WuSphere.github.io/blog/</link><description>Recent content in 博客文章 on My Hugo Site</description><generator>Hugo</generator><language>en-us</language><lastBuildDate>Wed, 06 Mar 2024 12:00:00 +0000</lastBuildDate><atom:link href="https://WuSphere.github.io/blog/index.xml" rel="self" type="application/rss+xml"/><item><title>我的第二篇博客</title><link>https://WuSphere.github.io/blog/test-1/</link><pubDate>Wed, 06 Mar 2024 12:00:00 +0000</pubDate><guid>https://WuSphere.github.io/blog/test-1/</guid><description>&lt;p>这是我的第一篇 Hugo 博客文章！&lt;/p></description></item><item><title/><link>https://WuSphere.github.io/blog/20250310-shellscript/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://WuSphere.github.io/blog/20250310-shellscript/</guid><description>&lt;h2 id="shell-script_ファイル一覧と行数をcsvファイルに出力する">[shell script]_ファイル一覧と行数をCSVファイルに出力する&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#!/usr/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#ファイルパスを指定する&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>filePath&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">$&amp;#39;H:/GitLab/fukushisource/fukushisource/SourceFiles/QAA/WebUI&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#行数を定義する（数値）&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>declare -i filelines&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#出力結果を格納する変数を定義する&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>declare output&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#改行を定義&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>LF&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">$&amp;#39;\n&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#フォルダを定義&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>folder&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#ファイル名を定義&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>fileName&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#拡張子を定義&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>expand&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#フォルダ・ファイルごとに処理する&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">while&lt;/span> read -r strpath; &lt;span style="color:#66d9ef">do&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">#パスがファイルであるかを判定する&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> test -f $strpath;&lt;span style="color:#66d9ef">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">#ファイル名を取得する&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fileName&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>basename $strpath&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">#拡張子を取得する&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> expand&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">${&lt;/span>strpath##*.&lt;span style="color:#e6db74">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">#CS・ASPX・XMLファイルの場合のみ後続の処理を行う&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">case&lt;/span> &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$expand&lt;span style="color:#e6db74">&amp;#34;&lt;/span> in 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;cs&amp;#34;&lt;/span> | &lt;span style="color:#e6db74">&amp;#34;aspx&amp;#34;&lt;/span> | &lt;span style="color:#e6db74">&amp;#34;xml&amp;#34;&lt;/span> |&lt;span style="color:#e6db74">&amp;#34;CS&amp;#34;&lt;/span> | &lt;span style="color:#e6db74">&amp;#34;ASPX&amp;#34;&lt;/span> | &lt;span style="color:#e6db74">&amp;#34;XML&amp;#34;&lt;/span> &lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">#対象ファイルの行数を数える&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> filelines&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>sed -n &lt;span style="color:#e6db74">&amp;#39;$=&amp;#39;&lt;/span> $strpath&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">#count=$(wc -l $strpath)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">#1回目の場合&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#f92672">[&lt;/span> -z &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$output&lt;span style="color:#e6db74">&amp;#34;&lt;/span> &lt;span style="color:#f92672">]&lt;/span>;&lt;span style="color:#66d9ef">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> output&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>$strpath&lt;span style="color:#e6db74">,&lt;/span>$folder&lt;span style="color:#e6db74">,&lt;/span>$fileName&lt;span style="color:#e6db74">,&lt;/span>$filelines&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">#2回目以降の場合&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">else&lt;/span> 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> output&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>$output$LF$strpath&lt;span style="color:#e6db74">,&lt;/span>$folder&lt;span style="color:#e6db74">,&lt;/span>$fileName&lt;span style="color:#e6db74">,&lt;/span>$filelines&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">esac&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">#パスの最後のディレクトリ名を抽出する&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">#folder=`echo ${f} | awk -F &amp;#34;/&amp;#34; &amp;#39;{ print $NF }&amp;#39;`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> folder&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>basename $strpath&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#サブディレクトリを見ない&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#done &amp;lt; &amp;lt;(find ./hoge -mindepth 1 -maxdepth 1)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#サブディレクトリを見る&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">done&lt;/span> &amp;lt; &amp;lt;&lt;span style="color:#f92672">(&lt;/span>find $filePath -mindepth 1&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#出力結果をcsvファイルに書き込み&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$output&lt;span style="color:#e6db74">&amp;#34;&lt;/span> &amp;gt; output.csv
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item></channel></rss>